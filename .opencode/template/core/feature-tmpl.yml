template_version: 1
description: "Structured feature template (converted from freeform). This follows the research-style schema: explicit frontmatter, body sections, required_fields, and rendering notes. Use as canonical feature template going forward."
agent: feature
output_dir: .context/features
filename_pattern: "{{slug}}.md"
required_fields:
  - title
  - created_at
  - slug
  - source_prompt

frontmatter:
  title: "{{title}}"
  created_at: "{{created_at}}" # ISO 8601 UTC
  slug: "{{slug}}"
  source_prompt: |
    {{source_prompt}}

body:
  short_summary: "{{short_summary}}"
  goals:
    - "{{goal_1}}"
  personas:
    - "{{persona_1}}"
  user_stories:
    - "As a {{role}}, I want {{action}}, so that {{benefit}}"
  acceptance_criteria:
    - "{{acceptance_1}}"
  implementation_plan:
    backend:
      - task: "{{backend_task_1}}"
        estimate: "{{backend_estimate}}"
    frontend:
      - task: "{{frontend_task_1}}"
        estimate: "{{frontend_estimate}}"
    tests:
      unit: "{{unit_tests}}"
      integration: "{{integration_tests}}"
      e2e: "{{e2e_tests}}"
      manual: "{{manual_steps}}"
  technical_considerations: "{{technical_considerations}}"
  files:
    - path: "{{file_path}}"
      purpose: "{{purpose}}"
  risks:
    - risk: "{{risk_1}}"
      mitigation: "{{mitigation_1}}"
  alternatives:
    - "{{alternative_1}}"
  effort:
    total: "{{estimated_effort}}"
    milestones:
      - name: "{{milestone_1}}"
        date: "{{milestone_1_time}}"
  reviewer_checklist:
    - code_builds: false
    - tests_added: false
    - docs_updated: false

rendering_notes: |
  - Ensure generated markdown includes the YAML frontmatter block using the keys in `required_fields`.
  - Map `body` keys to corresponding sections in the markdown (for example, `body.short_summary` -> "## Short Summary").
  - If additional placeholders are required, add them to `required_fields` so the validator can enforce presence in generated docs.
